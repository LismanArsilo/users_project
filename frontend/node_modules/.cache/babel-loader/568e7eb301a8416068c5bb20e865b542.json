{"ast":null,"code":"import { all, call, fork, put, takeEvery, takeLatest } from 'redux-saga/effects';\nimport apiUser from '../../api/api-user';\nimport { doSignupSucceed, doSignupFailed, doSigninSucceed, doSignoutSucceed, doShowAuthMessage } from '../actions/User';\n\nfunction* handleSignup(action) {\n  const {\n    payload\n  } = action;\n\n  try {\n    const result = yield call(apiUser.signup, payload);\n    yield put(doSignupSucceed(result.data));\n  } catch (error) {\n    yield put(doSignupFailed(error));\n  }\n}\n\nfunction* handleSignin(action) {\n  const {\n    payload\n  } = action;\n\n  try {\n    const result = yield call(apiUser.signin, payload);\n\n    if (Object.keys(result.data.profile).length === 0) {\n      yield put(doShowAuthMessage({\n        message: 'user or password not match, try again'\n      }));\n    } else {\n      localStorage.setItem('@token', result.data.token);\n      yield put(doSigninSucceed(result.data));\n    } //localStorage.setItem('@profile', JSON.stringify(result.data.profile));\n\n  } catch (error) {\n    yield put(doShowAuthMessage({\n      message: 'user or password not match, try again'\n    }));\n  }\n}\n\nfunction* handleSignout(action) {\n  const {\n    payload\n  } = action;\n\n  try {\n    localStorage.clear();\n    yield put(doSignoutSucceed(payload));\n  } catch (error) {\n    yield put(doSignupFailed(error));\n  }\n}\n\nexport { handleSignup, handleSignin, handleSignout };","map":{"version":3,"sources":["E:/users/frontend/src/redux-saga/middleware/UserSaga.js"],"names":["all","call","fork","put","takeEvery","takeLatest","apiUser","doSignupSucceed","doSignupFailed","doSigninSucceed","doSignoutSucceed","doShowAuthMessage","handleSignup","action","payload","result","signup","data","error","handleSignin","signin","Object","keys","profile","length","message","localStorage","setItem","token","handleSignout","clear"],"mappings":"AAAA,SACIA,GADJ,EACSC,IADT,EACeC,IADf,EACqBC,GADrB,EAC0BC,SAD1B,EACqCC,UADrC,QAES,oBAFT;AAIA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SACIC,eADJ,EACoBC,cADpB,EAEIC,eAFJ,EAEoBC,gBAFpB,EAGIC,iBAHJ,QAKO,iBALP;;AAOA,UAAUC,YAAV,CAAuBC,MAAvB,EAA+B;AAC3B,QAAM;AAACC,IAAAA;AAAD,MAAYD,MAAlB;;AACA,MAAI;AACA,UAAME,MAAM,GAAG,MAAMd,IAAI,CAACK,OAAO,CAACU,MAAT,EAAgBF,OAAhB,CAAzB;AACA,UAAMX,GAAG,CAACI,eAAe,CAACQ,MAAM,CAACE,IAAR,CAAhB,CAAT;AACH,GAHD,CAGE,OAAOC,KAAP,EAAc;AACZ,UAAMf,GAAG,CAACK,cAAc,CAACU,KAAD,CAAf,CAAT;AACH;AACJ;;AAED,UAAUC,YAAV,CAAuBN,MAAvB,EAA+B;AAC3B,QAAM;AAACC,IAAAA;AAAD,MAAYD,MAAlB;;AACA,MAAI;AACA,UAAME,MAAM,GAAG,MAAMd,IAAI,CAACK,OAAO,CAACc,MAAT,EAAgBN,OAAhB,CAAzB;;AACA,QAAIO,MAAM,CAACC,IAAP,CAAYP,MAAM,CAACE,IAAP,CAAYM,OAAxB,EAAiCC,MAAjC,KAA4C,CAAhD,EAAkD;AAC9C,YAAMrB,GAAG,CAACQ,iBAAiB,CAAC;AAACc,QAAAA,OAAO,EAAG;AAAX,OAAD,CAAlB,CAAT;AACH,KAFD,MAGI;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BZ,MAAM,CAACE,IAAP,CAAYW,KAA3C;AACA,YAAMzB,GAAG,CAACM,eAAe,CAACM,MAAM,CAACE,IAAR,CAAhB,CAAT;AACH,KARD,CASA;;AAEH,GAXD,CAWE,OAAOC,KAAP,EAAc;AACZ,UAAMf,GAAG,CAACQ,iBAAiB,CAAC;AAACc,MAAAA,OAAO,EAAG;AAAX,KAAD,CAAlB,CAAT;AACH;AACJ;;AAED,UAAUI,aAAV,CAAwBhB,MAAxB,EAAgC;AAC5B,QAAM;AAACC,IAAAA;AAAD,MAAYD,MAAlB;;AACA,MAAI;AACAa,IAAAA,YAAY,CAACI,KAAb;AACA,UAAM3B,GAAG,CAACO,gBAAgB,CAACI,OAAD,CAAjB,CAAT;AACH,GAHD,CAGE,OAAOI,KAAP,EAAc;AACZ,UAAMf,GAAG,CAACK,cAAc,CAACU,KAAD,CAAf,CAAT;AACH;AACJ;;AAED,SACIN,YADJ,EAEIO,YAFJ,EAGIU,aAHJ","sourcesContent":["import {\r\n    all, call, fork, put, takeEvery, takeLatest,\r\n  } from 'redux-saga/effects';\r\n\r\nimport apiUser from '../../api/api-user'\r\nimport {  \r\n    doSignupSucceed,doSignupFailed,\r\n    doSigninSucceed,doSignoutSucceed,\r\n    doShowAuthMessage\r\n    \r\n} from '../actions/User';\r\n\r\nfunction* handleSignup(action) {\r\n    const {payload} = action;\r\n    try {\r\n        const result = yield call(apiUser.signup,payload);\r\n        yield put(doSignupSucceed(result.data));\r\n    } catch (error) {\r\n        yield put(doSignupFailed(error));\r\n    }\r\n}\r\n\r\nfunction* handleSignin(action) {\r\n    const {payload} = action;\r\n    try {\r\n        const result = yield call(apiUser.signin,payload);\r\n        if (Object.keys(result.data.profile).length === 0){\r\n            yield put(doShowAuthMessage({message : 'user or password not match, try again'}));\r\n        }\r\n        else{\r\n            localStorage.setItem('@token', result.data.token);\r\n            yield put(doSigninSucceed(result.data));\r\n        }\r\n        //localStorage.setItem('@profile', JSON.stringify(result.data.profile));\r\n     \r\n    } catch (error) {\r\n        yield put(doShowAuthMessage({message : 'user or password not match, try again'}));\r\n    }\r\n}\r\n\r\nfunction* handleSignout(action) {\r\n    const {payload} = action;\r\n    try {\r\n        localStorage.clear();\r\n        yield put(doSignoutSucceed(payload));\r\n    } catch (error) {\r\n        yield put(doSignupFailed(error));\r\n    }\r\n}\r\n\r\nexport  {\r\n    handleSignup,\r\n    handleSignin,\r\n    handleSignout\r\n}"]},"metadata":{},"sourceType":"module"}